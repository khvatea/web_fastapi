# Web Fast API

Проект служит для отработки практической части на Fast API и технологии docker

## Оглавление

- [Разработка](#установка)
- [Сборка](#примеры)
- [Зависимости](#зависимости)
- [Тестирование](#тестирование)
- [Проблемы](#проблемы)

## Разработка

Для участия в разработке проекта:

```bash
# Клонируйте репозиторий
git clone https://github.com/khvatea/web_fastapi.git

# Перейдите в директорию проекта
cd ./web_fastapi

# Установите зависимости через poetry
poetry install --with dev
```

## Сборка

В проекте используются технологии docker. Для сборки проекта:
```bash
# Перейдите в корень проекта.
# Выполните команду для сборки образа docker (версию укажите самостоятельно)
docker build -t web_fastapi:0.1.0 .

# Тестировалось на версии docker = 26.1.3
```

## Зависимости

 ```bash
 # Для dev
pytest = "^8.3.4"
pytest-cov = "^6.0.0"
fastapi = "^0.115.8"
jinja2 = "^3.1.5"
uvicorn = "^0.34.0"
# Для установки зависимостей dev-окружения используйте:
poetry install --with dev

 # Для prod
fastapi = "^0.115.8"
jinja2 = "^3.1.5"
uvicorn = "^0.34.0"
# Для установки зависимостей используйте:
poetry install --with main
 ```

## Запуск

```bash
# Пример 1.
#  Склонируйте проект, выполните сборку и запустите контейнер
docker run -d --name test -p 8000:8000 web_fastapi:0.1.0

# Пример 2. Используйте загруженный образ в docker hub
docker pull khvatevgeniy/web_fastapi:0.1.0
docker run -d --name test -p 8000:8000 khvatevgeniy/web_fastapi:0.1.0
```

## Проблемы
**Получаю:**
```
Installing the current project: web_fastapi (0.1.0)
Error: The current project could not be installed: No file/folder found for package web-fastapi
```
**Причины и решения:**

1. _Неправильная структура директорий_: Poetry предполагает, что имя проекта в pyproject.toml совпадает с именем директории, в которой находится файл pyproject.toml7. Если это не так, Poetry не сможет найти пакет.

2. _Проблемы с package-mode_: Начиная с версии 2.0.0, Poetry по умолчанию требует, чтобы проект был пакетом Python. Если проект не предназначен для упаковки, можно отключить эту функцию, установив package-mode = false в секции [tool.poetry] файла pyproject.toml

3. _Неправильно указаны packages в pyproject.toml_: Если вы хотите явно указать Poetry, где находятся ваши пакеты, вы можете использовать настройку packages в pyproject.toml. Убедитесь, что пути к пакетам указаны правильно, например, { include = "src" }, если ваш код находится в директории src.

4. _Проблемы с версией Poetry_: В некоторых случаях ошибка может возникать из-за использования Poetry версии 2.0.0 и выше. В качестве временного решения можно установить более старую версию Poetry (например, 1.8.5).

5. _Некорректная установка зависимостей_: Ошибка может возникать, если зависимости проекта установлены некорректно. Попробуйте переустановить зависимости, удалив и повторно создав виртуальное окружение.
------